(function(f,a){typeof exports=="object"&&typeof module!="undefined"?a(exports):typeof define=="function"&&define.amd?define(["exports"],a):(f=typeof globalThis!="undefined"?globalThis:f||self,a(f.VInput={}))})(this,function(f){"use strict";function a(t){const n=Object.prototype.toString.call(t).slice(8,-1);return["HTMLInputElement","HTMLTextAreaElement"].indexOf(n)>-1}function m(t,n){let e=t;return n.split(".").every(i=>Object.prototype.hasOwnProperty.call(e,i)||window.Reflect&&Reflect.has(e,i)?(e=e[i],!0):!1)}function l(t,n,e){new Function("obj","value",`return obj.${n} = value`)(t,e)}function b(t,n){return n.split(".").reduce((e,i)=>e[i],t)}function d(t){if(Array.isArray(t)){const[n,e]=t;if(t.length!==2)throw Error("Array length must be 2");if(typeof n!="number"||typeof e!="number")throw Error("Array's elements must be `Number`");if(n>e)throw Error("In the array `[min, max]`, min cannot be greater than max")}else if(t!==void 0){if(typeof t!="function")throw Error("The `bindValue` must be `Function`");if(["","123","12ab","1.2.3.4"].some(e=>{const i=t(e);return i!==t(i)}))throw Error("Make sure `bindValue` function DONOT return dynamic value.")}}function p(t,n,e,i="input"){if(t==="")return t;let r=String(t);const c=e["!0"]||e.integer||e.negative||e.number||e.positive||Array.isArray(n);if(e.number&&!/^[-.\d]+$/.test(r)&&(r=r.replace(/[^-.\d]+/g,"")),e.integer&&!/^[-\d]+$/.test(r)&&(r=r.replace(/[^-\d]+/g,"")),e.positive&&!e.negative&&(r=r.replace(/[^.\d]+/g,"")),e.negative&&!e.positive&&(r=r.replace(/[^-.\d]+/g,"")),c&&(r=r.replace(/\s+/g,""),r!==""&&r!=="-"&&!isFinite(+r))){const o=r.match(/-?\d+\.?\d+/);o?r=o[0]:r=""}if(i==="blur"&&e.negative&&!e.positive&&!/^-/.test(r)&&Number(r)!==0&&(r=""),Array.isArray(n)&&r!==""){const[o,u]=n,s=Number(r);i==="blur"&&(s<o||s>u)&&(r="")}return i==="blur"&&c&&r!==""&&(r=String(Number(r))),typeof n=="function"&&(r=n(r)),r}function v(t,n,e){const i=(e.arg||"").replace(/:/g,"."),r=e.modifiers;if(!m(t,i))throw new Error(`The expression \`this.${i}\` not found.`);d(e.value),n.vInputUnwatch=t.$watch(i,(o,u)=>{if(typeof o=="string"){let s=p(o,e.value,r);o!==""&&s===""&&u!==""&&(s=p(u,e.value,r)),l(t,i,s)}});const c=a(n)?n:n.querySelector("input,textarea");if(c){const o=()=>{const u=b(t,i);let s=u;r["!0"]&&(isNaN(u)||(s=String(Number(u)),s==="0"&&(s=""))),l(t,i,p(s,e.value,r,"blur"))};c.addEventListener("blur",o),n.vInputBlur=[c,o]}}function h(t){var n;(n=t.vInputUnwatch)==null||n.call(t),t.vInputBlur&&t.vInputBlur[0].removeEventListener("blur",t.vInputBlur[1])}const y={mounted(t,n){const e=n.instance;e&&v(e,t,n)},beforeUnmount:h};var g={install:t=>{t.version.startsWith("2.")?t.directive("input",{bind(n,e,i){v(i.context,n,e)},unbind:h}):t.version.startsWith("3.")&&t.directive("input",y)}};f.default=g,f.directive=y,Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
