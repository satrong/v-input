(function(f,a){typeof exports=="object"&&typeof module!="undefined"?a(exports):typeof define=="function"&&define.amd?define(["exports"],a):(f=typeof globalThis!="undefined"?globalThis:f||self,a(f.VInput={}))})(this,function(f){"use strict";function a(t){const n=Object.prototype.toString.call(t).slice(8,-1);return["HTMLInputElement","HTMLTextAreaElement"].indexOf(n)>-1}function m(t,n){let e=t;return n.split(".").every(i=>Object.prototype.hasOwnProperty.call(e,i)||window.Reflect&&Reflect.has(e,i)?(e=e[i],!0):!1)}function p(t,n,e){const i=n.split(".");i.reduce((r,u,s)=>s===i.length-1?(r[u]=e,null):r[u],t)}function d(t,n){return n.split(".").reduce((e,i)=>e[i],t)}function g(t){if(Array.isArray(t)){const[n,e]=t;if(t.length!==2)throw Error("Array length must be 2");if(typeof n!="number"||typeof e!="number")throw Error("Array's elements must be `Number`");if(n>e)throw Error("In the array `[min, max]`, min cannot be greater than max")}else if(t!==void 0){if(typeof t!="function")throw Error("The `bindValue` must be `Function`");if(["","123","12ab","1.2.3.4"].some(e=>{const i=t(e);return i!==t(i)}))throw Error("Make sure `bindValue` function DONOT return dynamic value.")}}function l(t,n,e,i="input"){if(t==="")return t;let r=String(t);const u=e["!0"]||e.integer||e.negative||e.number||e.positive||Array.isArray(n);if(e.number&&!/^[-.\d]+$/.test(r)&&(r=r.replace(/[^-.\d]+/g,"")),e.integer&&!/^[-\d]+$/.test(r)&&(r=r.replace(/[^-\d]+/g,"")),e.positive&&!e.negative&&(r=r.replace(/[^.\d]+/g,"")),e.negative&&!e.positive&&(r=r.replace(/[^-.\d]+/g,"")),u&&(r=r.replace(/\s+/g,""),r!==""&&r!=="-"&&!isFinite(+r))){const s=r.match(/-?\d+\.?\d+/);s?r=s[0]:r=""}if(i==="blur"&&e.negative&&!e.positive&&!/^-/.test(r)&&Number(r)!==0&&(r=""),Array.isArray(n)&&r!==""){const[s,c]=n,o=Number(r);i==="blur"&&(o<s||o>c)&&(r="")}return i==="blur"&&u&&r!==""&&(r=String(Number(r))),typeof n=="function"&&(r=n(r)),r}function v(t,n,e){const i=(e.arg||"").replace(/:/g,"."),r=e.modifiers;if(!m(t,i))throw new Error(`The expression \`this.${i}\` not found.`);g(e.value),n.vInputUnwatch=t.$watch(i,(s,c)=>{if(typeof s=="string"){let o=l(s,e.value,r);s!==""&&o===""&&c!==""&&(o=l(c,e.value,r)),p(t,i,o)}});const u=a(n)?n:n.querySelector("input,textarea");if(u){const s=()=>{const c=d(t,i);let o=c;r["!0"]&&(isNaN(c)||(o=String(Number(c)),o==="0"&&(o=""))),p(t,i,l(o,e.value,r,"blur"))};u.addEventListener("blur",s),n.vInputBlur=[u,s]}}function h(t){var n;(n=t.vInputUnwatch)==null||n.call(t),t.vInputBlur&&t.vInputBlur[0].removeEventListener("blur",t.vInputBlur[1])}const y={mounted(t,n){const e=n.instance;e&&v(e,t,n)},beforeUnmount:h};var b={install:t=>{t.version.startsWith("2.")?t.directive("input",{bind(n,e,i){v(i.context,n,e)},unbind:h}):t.version.startsWith("3.")&&t.directive("input",y)}};f.default=b,f.directive=y,Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
