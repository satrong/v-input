function t(t,e,r,n="input"){if(""===t)return t;let i=String(t);const o=r["!0"]||r.integer||r.negative||r.number||r.positive||Array.isArray(e);if(r.number&&!/^[-.\d]+$/.test(i)&&(i=i.replace(/[^-.\d]+/g,"")),r.integer&&!/^[-\d]+$/.test(i)&&(i=i.replace(/[^-\d]+/g,"")),r.positive&&!r.negative&&(i=i.replace(/[^.\d]+/g,"")),r.negative&&!r.positive&&(i=i.replace(/[^-.\d]+/g,"")),o&&""!==i&&"-"!==i&&!isFinite(+i)){const t=i.match(/-?\d+\.?\d+/);i=t?t[0]:""}if("blur"!==n||!r.negative||r.positive||/^-/.test(i)||0===Number(i)||(i=""),Array.isArray(e)){const[t,r]=e,n=Number(i);(n<t||n>r)&&(i="")}return"blur"===n&&o&&""!==i&&(i=String(Number(i))),"function"==typeof e&&(i=e(i)),i}function e(e,r,n){const i=n.arg||"",o=n.modifiers;if(!Object.prototype.hasOwnProperty.call(e.$data,i))return;!function(t){if(Array.isArray(t)){const[e,r]=t;if(2!==t.length)throw Error("数组长度必须为2");if("number"!=typeof e||"number"!=typeof r)throw Error("取值范围的最小值和最大值必须是数值");if(e>r)throw Error("取值范围的最小值不能大于最大值")}else if(void 0!==t&&"function"!=typeof t)throw Error("绑定值必须是函数")}(n.value),r.vInputUnwatch=e.$watch(i,((r,u)=>{if("string"==typeof r){let a=t(r,n.value,o);""!==r&&""===a&&""!==u&&(a=t(u,n.value,o)),e.$data[i]=a}}));const u=function(t){const e=Object.prototype.toString.call(t).slice(8,-1);return["HTMLInputElement","HTMLTextAreaElement"].indexOf(e)>-1}(r)?r:r.querySelector("input,textarea");if(u){const a=()=>{const r=e.$data[i];let u=r;o["!0"]&&(isNaN(r)||(u=String(Number(r)),"0"===u&&(u=""))),e.$data[i]=t(u,n.value,o,"blur")};u.addEventListener("blur",a),r.vInputBlur=[u,a]}}function r(t){var e;null==(e=t.vInputUnwatch)||e.call(t),t.vInputBlur&&t.vInputBlur[0].removeEventListener("blur",t.vInputBlur[1])}const n={mounted(t,r){const n=r.instance;n&&e(n,t,r)},beforeUnmount:r};var i={install:t=>{if("string"!=typeof t.version)throw new Error("传入参数错误：\nVue 3 请传入 `createApp()`，\nVue 2 请传入 `Vue` 函数");t.version.startsWith("2.")?t.directive("input",{bind(t,r,n){e(n.context,t,r)},unbind:r}):t.version.startsWith("3.")&&t.directive("input",n)}};export default i;export{n as directive};
